<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Agent Trading Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #00ff88, #00d4ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(0, 255, 136, 0.3);
        }

        .subtitle {
            text-align: center;
            color: #aaa;
            margin-bottom: 40px;
            font-size: 1.1rem;
        }

        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        @media (max-width: 968px) {
            .grid {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .card h2 {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: #00ff88;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card h2::before {
            content: 'ü§ñ';
            font-size: 1.8rem;
        }

        textarea {
            width: 100%;
            min-height: 400px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(0, 255, 136, 0.3);
            border-radius: 10px;
            padding: 15px;
            color: #fff;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            resize: vertical;
            transition: all 0.3s;
        }

        textarea:focus {
            outline: none;
            border-color: #00ff88;
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.2);
        }

        .output-section {
            grid-column: 1 / -1;
        }

        .output-box {
            background: rgba(0, 0, 0, 0.4);
            border: 2px solid #00ff88;
            border-radius: 10px;
            padding: 20px;
            min-height: 500px;
            max-height: 600px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            line-height: 1.6;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .output-box::-webkit-scrollbar {
            width: 10px;
        }

        .output-box::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
        }

        .output-box::-webkit-scrollbar-thumb {
            background: #00ff88;
            border-radius: 10px;
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        button {
            flex: 1;
            min-width: 150px;
            padding: 15px 30px;
            font-size: 1rem;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-generate {
            background: linear-gradient(45deg, #00ff88, #00d4ff);
            color: #000;
        }

        .btn-generate:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 255, 136, 0.4);
        }

        .btn-copy {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: #fff;
        }

        .btn-copy:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }

        .btn-clear {
            background: linear-gradient(45deg, #f093fb, #f5576c);
            color: #fff;
        }

        .btn-clear:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(245, 87, 108, 0.4);
        }

        .status {
            margin-top: 15px;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            font-weight: bold;
            display: none;
        }

        .status.success {
            background: rgba(0, 255, 136, 0.2);
            border: 1px solid #00ff88;
            color: #00ff88;
            display: block;
        }

        .status.error {
            background: rgba(255, 87, 108, 0.2);
            border: 1px solid #f5576c;
            color: #f5576c;
            display: block;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .stat-card {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #00ff88;
        }

        .stat-label {
            font-size: 0.85rem;
            color: #aaa;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #00ff88;
        }

        .info-box {
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .info-box p {
            margin: 5px 0;
            font-size: 0.9rem;
            color: #ccc;
        }

        .highlight {
            color: #00d4ff;
            font-weight: bold;
        }

        .analysis-section {
            display: none;
            margin-top: 30px;
        }

        .analysis-section.active {
            display: block;
        }

        .chart-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            height: 400px;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .metric-card {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
            border-left: 4px solid #00ff88;
            transition: transform 0.3s;
        }

        .metric-card:hover {
            transform: translateY(-5px);
        }

        .metric-title {
            font-size: 0.85rem;
            color: #aaa;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .metric-value {
            font-size: 2rem;
            font-weight: bold;
            color: #00ff88;
            margin-bottom: 5px;
        }

        .metric-subtitle {
            font-size: 0.9rem;
            color: #ccc;
        }

        .score-bars {
            margin-top: 20px;
        }

        .score-bar {
            margin-bottom: 15px;
        }

        .score-bar-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }

        .score-bar-fill {
            height: 25px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 5px;
            overflow: hidden;
            position: relative;
        }

        .score-bar-progress {
            height: 100%;
            background: linear-gradient(90deg, #00ff88, #00d4ff);
            transition: width 1s ease;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 10px;
            color: #000;
            font-weight: bold;
            font-size: 0.85rem;
        }

        .recommendation-box {
            background: linear-gradient(135deg, rgba(0, 255, 136, 0.2), rgba(0, 212, 255, 0.2));
            border: 2px solid #00ff88;
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
        }

        .recommendation-box h3 {
            font-size: 1.8rem;
            margin-bottom: 15px;
            color: #00ff88;
        }

        .recommendation-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .summary-box {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            border-left: 4px solid #00d4ff;
        }

        .summary-box h4 {
            color: #00d4ff;
            margin-bottom: 10px;
        }

        .summary-box p {
            line-height: 1.8;
            color: #ccc;
        }

        .badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: bold;
            margin: 5px;
        }

        .badge.buy {
            background: rgba(0, 255, 136, 0.2);
            color: #00ff88;
            border: 1px solid #00ff88;
        }

        .badge.hold {
            background: rgba(255, 193, 7, 0.2);
            color: #ffc107;
            border: 1px solid #ffc107;
        }

        .badge.sell {
            background: rgba(255, 87, 108, 0.2);
            color: #f5576c;
            border: 1px solid #f5576c;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ü§ñ Multi-Agent Trading Dashboard</h1>
        <p class="subtitle">KI-gest√ºtzte Aktienanalyse ‚Üí Pine Script Generator</p>

        <div class="grid">
            <div class="card">
                <h2>JSON Input</h2>
                <div class="info-box">
                    <p>üìã <span class="highlight">Anleitung:</span></p>
                    <p>1. Kopiere die GESAMTE JSON-Ausgabe deines Workflows</p>
                    <p>2. F√ºge sie unten ein</p>
                    <p>3. Klicke auf "Pine Script Generieren"</p>
                </div>
                <textarea id="jsonInput" placeholder='F√ºge hier die komplette JSON-Ausgabe deines Multi-Agent Workflows ein...

Beispiel:
{
  "agent": "Finanz-Sentiment-Analyst",
  "aktie": "Microsoft",
  "aktueller_kurs_eur": 413.90,
  ...
}'></textarea>
            </div>

            <div class="card">
                <h2>Extrahierte Daten</h2>
                <div class="stats-grid" id="statsGrid">
                    <div class="stat-card">
                        <div class="stat-label">Aktie</div>
                        <div class="stat-value" id="statStock">-</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Aktueller Kurs</div>
                        <div class="stat-value" id="statPrice">-</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Score</div>
                        <div class="stat-value" id="statScore">-</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Setup</div>
                        <div class="stat-value" id="statSetup">-</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Entry Zone</div>
                        <div class="stat-value" id="statEntry">-</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Stop Loss</div>
                        <div class="stat-value" id="statSL">-</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Take Profit 1</div>
                        <div class="stat-value" id="statTP1">-</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Take Profit 2</div>
                        <div class="stat-value" id="statTP2">-</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card output-section">
            <h2>Generiertes Pine Script</h2>
            <div class="output-box" id="pineScriptOutput">// Dein Pine Script erscheint hier nach dem Generieren...</div>
            
            <div class="button-group">
                <button class="btn-generate" onclick="generatePineScript()">
                    ‚ö° Pine Script Generieren
                </button>
                <button class="btn-copy" onclick="copyToClipboard()">
                    üìã Script Kopieren
                </button>
                <button class="btn-clear" onclick="clearAll()">
                    üóëÔ∏è Alles L√∂schen
                </button>
            </div>

            <div class="status" id="status"></div>
        </div>

        <!-- NEUE ANALYSE-SEKTION -->
        <div class="analysis-section" id="analysisSection">
            <div class="card">
                <h2>üìä Detaillierte Aktienanalyse</h2>
                
                <!-- Chart -->
                <div class="chart-container">
                    <canvas id="priceChart"></canvas>
                </div>

                <!-- Hauptmetriken -->
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-title">üí∞ Aktueller Kurs</div>
                        <div class="metric-value" id="detailPrice">-</div>
                        <div class="metric-subtitle" id="detailStock">-</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-title">üéØ Multi-Agent Score</div>
                        <div class="metric-value" id="detailScore">-</div>
                        <div class="metric-subtitle" id="detailSetup">-</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-title">üìà Erwarteter Gewinn</div>
                        <div class="metric-value" id="detailGain">-</div>
                        <div class="metric-subtitle">bis Take Profit 2</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-title">‚öñÔ∏è Risk/Reward</div>
                        <div class="metric-value" id="detailRR">-</div>
                        <div class="metric-subtitle">Verh√§ltnis</div>
                    </div>
                </div>

                <!-- Empfehlung -->
                <div class="recommendation-box">
                    <h3 id="recTitle">üéØ HANDELSEMPFEHLUNG</h3>
                    <div class="recommendation-details">
                        <div>
                            <div class="metric-title">Aktion</div>
                            <div class="metric-value" style="font-size: 1.5rem;" id="recAction">-</div>
                        </div>
                        <div>
                            <div class="metric-title">Konfidenz</div>
                            <div class="metric-value" style="font-size: 1.5rem;" id="recConfidence">-</div>
                        </div>
                        <div>
                            <div class="metric-title">Zeithorizont</div>
                            <div class="metric-value" style="font-size: 1.5rem;" id="recTimeframe">-</div>
                        </div>
                    </div>
                </div>

                <!-- Score Breakdown -->
                <div class="card" style="margin-top: 20px; background: rgba(0,0,0,0.3);">
                    <h3 style="color: #00d4ff; margin-bottom: 15px;">üìä Score Breakdown</h3>
                    <div class="score-bars">
                        <div class="score-bar">
                            <div class="score-bar-label">
                                <span>üí≠ Sentiment Score</span>
                                <span id="sentimentScoreValue">-</span>
                            </div>
                            <div class="score-bar-fill">
                                <div class="score-bar-progress" id="sentimentBar" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="score-bar">
                            <div class="score-bar-label">
                                <span>üìà Technical Score</span>
                                <span id="technicalScoreValue">-</span>
                            </div>
                            <div class="score-bar-fill">
                                <div class="score-bar-progress" id="technicalBar" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="score-bar">
                            <div class="score-bar-label">
                                <span>üíº Fundamental Score</span>
                                <span id="fundamentalScoreValue">-</span>
                            </div>
                            <div class="score-bar-fill">
                                <div class="score-bar-progress" id="fundamentalBar" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="score-bar">
                            <div class="score-bar-label">
                                <span>üåç Makro Score</span>
                                <span id="makroScoreValue">-</span>
                            </div>
                            <div class="score-bar-fill">
                                <div class="score-bar-progress" id="makroBar" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Technische Indikatoren -->
                <div class="metrics-grid" style="margin-top: 20px;">
                    <div class="metric-card">
                        <div class="metric-title">üìä RSI (14)</div>
                        <div class="metric-value" style="font-size: 1.5rem;" id="detailRSI">-</div>
                        <div class="metric-subtitle" id="rsiStatus">-</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-title">üìâ MACD Signal</div>
                        <div class="metric-value" style="font-size: 1.5rem;" id="detailMACD">-</div>
                        <div class="metric-subtitle">Trend-Indikator</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-title">üíπ KGV (P/E)</div>
                        <div class="metric-value" style="font-size: 1.5rem;" id="detailKGV">-</div>
                        <div class="metric-subtitle">Bewertung</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-title">üìä ROE</div>
                        <div class="metric-value" style="font-size: 1.5rem;" id="detailROE">-</div>
                        <div class="metric-subtitle">Eigenkapitalrendite</div>
                    </div>
                </div>

                <!-- Trading Levels -->
                <div class="card" style="margin-top: 20px; background: rgba(0,0,0,0.3);">
                    <h3 style="color: #00d4ff; margin-bottom: 15px;">üéØ Trading Levels</h3>
                    <div class="metrics-grid">
                        <div class="metric-card" style="border-left-color: #00ff88;">
                            <div class="metric-title">üíö Entry Zone</div>
                            <div class="metric-value" style="font-size: 1.3rem; color: #00ff88;" id="detailEntry">-</div>
                        </div>
                        <div class="metric-card" style="border-left-color: #ff4444;">
                            <div class="metric-title">‚õî Stop Loss</div>
                            <div class="metric-value" style="font-size: 1.3rem; color: #ff4444;" id="detailSL">-</div>
                        </div>
                        <div class="metric-card" style="border-left-color: #00d4ff;">
                            <div class="metric-title">üéØ Take Profit 1</div>
                            <div class="metric-value" style="font-size: 1.3rem; color: #00d4ff;" id="detailTP1">-</div>
                        </div>
                        <div class="metric-card" style="border-left-color: #00d4ff;">
                            <div class="metric-title">üöÄ Take Profit 2</div>
                            <div class="metric-value" style="font-size: 1.3rem; color: #00d4ff;" id="detailTP2">-</div>
                        </div>
                    </div>
                </div>

                <!-- Zusammenfassung -->
                <div class="summary-box">
                    <h4>üìù KI-Analyse Zusammenfassung</h4>
                    <p id="detailSummary">-</p>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        function extractData(jsonText) {
            try {
                const data = JSON.parse(jsonText);
                
                // Extrahiere alle relevanten Daten
                const extractedData = {
                    // Basis-Daten
                    stock: data.aktie || data.stock || 'Unknown',
                    currentPrice: data.aktueller_kurs_eur || data.current_price || 0,
                    score: data.gesamtbewertung?.gewichteter_score || data.score || 0,
                    setupQuality: data.setup_qualitaet || data.setup_rating_final?.rating || 'N/A',
                    
                    // Trading Daten
                    entryLow: data.trading_empfehlung?.einstiegsstrategie?.akzeptabler_einstiegsbereich_eur?.von || 
                              data.entry_analyse?.entry_szenarien?.[1]?.entry_preis_eur || 0,
                    entryHigh: data.trading_empfehlung?.einstiegsstrategie?.akzeptabler_einstiegsbereich_eur?.bis || 
                               data.entry_analyse?.entry_szenarien?.[0]?.entry_preis_eur || 0,
                    stopLoss: data.trading_empfehlung?.stop_loss?.stop_loss_kurs_eur || 
                              data.exit_strategie?.stop_loss_strategie?.initial_stop?.kurs_eur || 0,
                    takeProfit1: data.trading_empfehlung?.kursziele?.konservativ_eur || 
                                 data.exit_strategie?.gewinnmitnahme_plan?.[0]?.kurs_eur || 0,
                    takeProfit2: data.trading_empfehlung?.kursziele?.realistisch_eur || 
                                 data.exit_strategie?.gewinnmitnahme_plan?.[1]?.kurs_eur || 0,
                    takeProfit3: data.trading_empfehlung?.kursziele?.optimistisch_eur || 
                                 data.exit_strategie?.gewinnmitnahme_plan?.[2]?.kurs_eur || 0,
                    
                    // Support/Resistance
                    support1: data.support_resistance?.major_support?.[0]?.level || 0,
                    support2: data.support_resistance?.major_support?.[1]?.level || 0,
                    resistance1: data.support_resistance?.major_resistance?.[0]?.level || 0,
                    resistance2: data.support_resistance?.major_resistance?.[1]?.level || 0,
                    
                    // Technische Indikatoren
                    sma20: data.moving_averages?.sma_20 || 0,
                    sma50: data.moving_averages?.sma_50 || 0,
                    sma200: data.moving_averages?.sma_200 || 0,
                    rsi: data.momentum_indikatoren?.rsi_14?.wert || 0,
                    macd: data.momentum_indikatoren?.macd?.signal || 'neutral',
                    
                    // Sentiment & Scores
                    sentimentScore: data.sentiment_score || 0,
                    sentimentKategorie: data.sentiment_kategorie || 'neutral',
                    technicalScore: data.analysen_scores?.technical?.score_0_100 || 0,
                    fundamentalScore: data.analysen_scores?.fundamental?.score_0_100 || 0,
                    makroScore: data.analysen_scores?.makro?.score_0_100 || 0,
                    
                    // Fundamental-Daten
                    kgv: data.bewertungskennzahlen?.kgv || 0,
                    roe: data.profitabilitaet?.roe_prozent || 0,
                    ebitdaMarge: data.profitabilitaet?.ebitda_marge_prozent || 0,
                    
                    // Empfehlung
                    empfehlung: data.gesamtbewertung?.empfehlung || data.trading_empfehlung?.aktion || 'N/A',
                    konfidenz: data.gesamtbewertung?.konfidenz_prozent || 0,
                    
                    // Risk/Reward
                    risikoRendite: data.trading_empfehlung?.risiko_rendite_verhaeltnis || 0,
                    erwarteterGewinn: data.trading_empfehlung?.erwarteter_gewinn_prozent || 0,
                    
                    // Zeithorizont
                    haltedauer: data.trading_empfehlung?.kursziele?.zeithorizont || 
                                data.swing_setup_typ || 'N/A',
                    
                    // Zusammenfassung
                    zusammenfassung: data.zusammenfassung || data.setup_rating_final?.zusammenfassung || 'Keine Zusammenfassung verf√ºgbar'
                };

                return extractedData;
            } catch (e) {
                throw new Error('Ung√ºltiges JSON Format: ' + e.message);
            }
        }

        function updateStats(data) {
            document.getElementById('statStock').textContent = data.stock;
            document.getElementById('statPrice').textContent = data.currentPrice ? `‚Ç¨${data.currentPrice.toFixed(2)}` : '-';
            document.getElementById('statScore').textContent = data.score ? `${data.score}/100` : '-';
            document.getElementById('statSetup').textContent = data.setupQuality || '-';
            document.getElementById('statEntry').textContent = data.entryLow && data.entryHigh ? 
                `‚Ç¨${data.entryLow.toFixed(2)} - ‚Ç¨${data.entryHigh.toFixed(2)}` : '-';
            document.getElementById('statSL').textContent = data.stopLoss ? `‚Ç¨${data.stopLoss.toFixed(2)}` : '-';
            document.getElementById('statTP1').textContent = data.takeProfit1 ? `‚Ç¨${data.takeProfit1.toFixed(2)}` : '-';
            document.getElementById('statTP2').textContent = data.takeProfit2 ? `‚Ç¨${data.takeProfit2.toFixed(2)}` : '-';
        }

        function updateDetailedAnalysis(data) {
            // Hauptmetriken
            document.getElementById('detailPrice').textContent = `‚Ç¨${data.currentPrice.toFixed(2)}`;
            document.getElementById('detailStock').textContent = data.stock;
            document.getElementById('detailScore').textContent = `${data.score}/100`;
            document.getElementById('detailSetup').textContent = `Setup: ${data.setupQuality}`;
            
            const gainPercent = ((data.takeProfit2 - data.currentPrice) / data.currentPrice * 100).toFixed(1);
            document.getElementById('detailGain').textContent = `+${gainPercent}%`;
            document.getElementById('detailRR').textContent = `1:${data.risikoRendite.toFixed(1)}`;

            // Empfehlung
            const recAction = document.getElementById('recAction');
            recAction.textContent = data.empfehlung;
            recAction.className = 'metric-value';
            if (data.empfehlung.toLowerCase().includes('kauf')) {
                recAction.style.color = '#00ff88';
            } else if (data.empfehlung.toLowerCase().includes('halt')) {
                recAction.style.color = '#ffc107';
            }
            
            document.getElementById('recConfidence').textContent = `${data.konfidenz}%`;
            document.getElementById('recTimeframe').textContent = data.haltedauer;

            // Score Breakdown mit Animation
            setTimeout(() => {
                updateScoreBar('sentimentBar', 'sentimentScoreValue', data.sentimentScore);
                updateScoreBar('technicalBar', 'technicalScoreValue', data.technicalScore);
                updateScoreBar('fundamentalBar', 'fundamentalScoreValue', data.fundamentalScore);
                updateScoreBar('makroBar', 'makroScoreValue', data.makroScore);
            }, 100);

            // Technische Indikatoren
            document.getElementById('detailRSI').textContent = data.rsi.toFixed(0);
            const rsiStatus = document.getElementById('rsiStatus');
            if (data.rsi < 30) {
                rsiStatus.textContent = '√úberverkauft';
                rsiStatus.style.color = '#00ff88';
            } else if (data.rsi > 70) {
                rsiStatus.textContent = '√úberkauft';
                rsiStatus.style.color = '#ff4444';
            } else {
                rsiStatus.textContent = 'Neutral';
                rsiStatus.style.color = '#ffc107';
            }

            document.getElementById('detailMACD').textContent = data.macd.toUpperCase();
            document.getElementById('detailKGV').textContent = data.kgv.toFixed(1);
            document.getElementById('detailROE').textContent = `${data.roe.toFixed(1)}%`;

            // Trading Levels
            document.getElementById('detailEntry').textContent = `‚Ç¨${data.entryLow.toFixed(2)} - ‚Ç¨${data.entryHigh.toFixed(2)}`;
            document.getElementById('detailSL').textContent = `‚Ç¨${data.stopLoss.toFixed(2)}`;
            document.getElementById('detailTP1').textContent = `‚Ç¨${data.takeProfit1.toFixed(2)}`;
            document.getElementById('detailTP2').textContent = `‚Ç¨${data.takeProfit2.toFixed(2)}`;

            // Zusammenfassung
            document.getElementById('detailSummary').textContent = data.zusammenfassung;

            // Chart erstellen
            createPriceChart(data);

            // Analyse-Sektion anzeigen
            document.getElementById('analysisSection').classList.add('active');
        }

        function updateScoreBar(barId, valueId, score) {
            const bar = document.getElementById(barId);
            const value = document.getElementById(valueId);
            
            bar.style.width = `${score}%`;
            value.textContent = `${score}/100`;
            
            if (score >= 70) {
                bar.style.background = 'linear-gradient(90deg, #00ff88, #00d4ff)';
            } else if (score >= 50) {
                bar.style.background = 'linear-gradient(90deg, #ffc107, #ff9800)';
            } else {
                bar.style.background = 'linear-gradient(90deg, #ff4444, #f5576c)';
            }
        }

        let priceChart = null;

        function createPriceChart(data) {
            const ctx = document.getElementById('priceChart');
            
            if (priceChart) {
                priceChart.destroy();
            }

            const levels = [
                { label: 'TP2', value: data.takeProfit2, color: '#00d4ff' },
                { label: 'TP1', value: data.takeProfit1, color: '#00ff88' },
                { label: 'R1', value: data.resistance1, color: '#ff4444' },
                { label: 'Aktuell', value: data.currentPrice, color: '#ffc107' },
                { label: 'Entry High', value: data.entryHigh, color: '#00ff88' },
                { label: 'Entry Low', value: data.entryLow, color: '#00ff88' },
                { label: 'S1', value: data.support1, color: '#00ff88' },
                { label: 'Stop Loss', value: data.stopLoss, color: '#ff4444' }
            ].filter(l => l.value > 0).sort((a, b) => b.value - a.value);

            priceChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: levels.map(l => l.label),
                    datasets: [{
                        label: 'EUR',
                        data: levels.map(l => l.value),
                        backgroundColor: levels.map(l => l.color + '40'),
                        borderColor: levels.map(l => l.color),
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            titleColor: '#00ff88',
                            bodyColor: '#fff',
                            borderColor: '#00ff88',
                            borderWidth: 1,
                            callbacks: {
                                label: (context) => `‚Ç¨${context.parsed.x.toFixed(2)}`
                            }
                        }
                    },
                    scales: {
                        x: {
                            ticks: {
                                color: '#aaa',
                                callback: (value) => `‚Ç¨${value}`
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            }
                        },
                        y: {
                            ticks: {
                                color: '#fff',
                                font: {
                                    size: 12,
                                    weight: 'bold'
                                }
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.05)'
                            }
                        }
                    }
                }
            });
        }

        function generatePineScript() {
            const jsonInput = document.getElementById('jsonInput').value.trim();
            const output = document.getElementById('pineScriptOutput');
            const status = document.getElementById('status');

            if (!jsonInput) {
                showStatus('‚ùå Bitte f√ºge zuerst JSON-Daten ein!', 'error');
                return;
            }

            try {
                const data = extractData(jsonInput);
                updateStats(data);
                updateDetailedAnalysis(data);

                const pineScript = `//@version=5
indicator("üéØ ${data.stock} - Multi-Agent Trading Signals", overlay=true, max_labels_count=50, max_boxes_count=20, max_lines_count=50)

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// üéõÔ∏è AUTO-GENERIERT VON MULTI-AGENT WORKFLOW
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

// Aktie: ${data.stock}
// Analyse-Datum: ${new Date().toLocaleDateString('de-DE')}
// Multi-Agent Score: ${data.score}/100
// Setup Qualit√§t: ${data.setupQuality}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// üéõÔ∏è EINSTELLUNGEN
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

showEntrySignals = input.bool(true, "üü¢ Kaufsignale anzeigen", group="Anzeige")
showExitSignals = input.bool(true, "üî¥ Verkaufssignale anzeigen", group="Anzeige")
showStopLoss = input.bool(true, "‚õî Stop Loss", group="Anzeige")
showTakeProfit = input.bool(true, "üéØ Take Profit", group="Anzeige")
showKeyLevels = input.bool(true, "üìä Support/Resistance", group="Anzeige")

// Trading Parameter (Multi-Agent Analyse)
analyzedEntryLow = input.float(${data.entryLow.toFixed(2)}, "Entry Zone - Untergrenze", group="Entry Setup")
analyzedEntryHigh = input.float(${data.entryHigh.toFixed(2)}, "Entry Zone - Obergrenze", group="Entry Setup")
analyzedStopLoss = input.float(${data.stopLoss.toFixed(2)}, "Stop Loss Level", group="Risk Management")
analyzedTakeProfit1 = input.float(${data.takeProfit1.toFixed(2)}, "Take Profit 1 (R1)", group="Targets")
analyzedTakeProfit2 = input.float(${data.takeProfit2.toFixed(2)}, "Take Profit 2 (R2)", group="Targets")

analyzedS1 = input.float(${data.support1.toFixed(2)}, "Support 1", group="Key Levels")
analyzedR1 = input.float(${data.resistance1.toFixed(2)}, "Resistance 1", group="Key Levels")

// Multi-Agent Intelligence
gesamtScore = input.float(${data.score}, "Multi-Agent Score (0-100)", minval=0, maxval=100, group="Trading Intelligence")
setupQuality = input.string("${data.setupQuality}", "Setup Qualit√§t", options=["A++", "A+", "A", "B+", "B", "C"], group="Trading Intelligence")

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// üìä BERECHNUNGEN
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

sma20 = ta.sma(close, 20)
sma50 = ta.sma(close, 50)
rsi = ta.rsi(close, 14)
atr = ta.atr(14)

inEntryZone = close >= analyzedEntryLow and close <= analyzedEntryHigh
avgEntry = (analyzedEntryLow + analyzedEntryHigh) / 2

potentialGainTP1 = ((analyzedTakeProfit1 - avgEntry) / avgEntry) * 100
potentialGainTP2 = ((analyzedTakeProfit2 - avgEntry) / avgEntry) * 100
potentialLoss = ((avgEntry - analyzedStopLoss) / avgEntry) * 100
rrRatioTP1 = potentialLoss > 0 ? potentialGainTP1 / potentialLoss : 0
rrRatioTP2 = potentialLoss > 0 ? potentialGainTP2 / potentialLoss : 0

bullishTrend = close > sma20 and sma20 > sma50
bearishTrend = close < sma20 and sma20 < sma50
rsiOversold = rsi < 35
rsiOverbought = rsi > 70

buySignal = inEntryZone and bullishTrend and gesamtScore >= 60 and not inEntryZone[1]
sellSignalTP1 = ta.crossover(close, analyzedTakeProfit1)
sellSignalTP2 = ta.crossover(close, analyzedTakeProfit2)
sellSignalRSI = rsiOverbought and close > avgEntry
stopLossHit = ta.crossunder(close, analyzedStopLoss)

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// üé® VISUALISIERUNG
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

plot(sma20, "SMA 20", color=color.new(color.yellow, 60), linewidth=1)
plot(sma50, "SMA 50", color=color.new(color.orange, 60), linewidth=1)

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// üìç KEY LEVELS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

if barstate.islast and showKeyLevels
    if showTakeProfit
        line.new(bar_index - 50, analyzedTakeProfit1, bar_index + 20, analyzedTakeProfit1, 
             color=color.new(color.lime, 30), width=2, style=line.style_dashed)
        label.new(bar_index + 22, analyzedTakeProfit1, "üéØ TP1: " + str.tostring(analyzedTakeProfit1, "#.##"), 
             style=label.style_label_left, color=color.new(color.lime, 30), textcolor=color.white, size=size.small)
        
        line.new(bar_index - 50, analyzedTakeProfit2, bar_index + 20, analyzedTakeProfit2, 
             color=color.new(color.lime, 50), width=1, style=line.style_dotted)
        label.new(bar_index + 22, analyzedTakeProfit2, "üéØ TP2: " + str.tostring(analyzedTakeProfit2, "#.##"), 
             style=label.style_label_left, color=color.new(color.lime, 50), textcolor=color.white, size=size.tiny)
    
    if showStopLoss
        line.new(bar_index - 50, analyzedStopLoss, bar_index + 20, analyzedStopLoss, 
             color=color.new(color.red, 20), width=3, style=line.style_solid)
        label.new(bar_index + 22, analyzedStopLoss, "‚õî STOP LOSS: " + str.tostring(analyzedStopLoss, "#.##"), 
             style=label.style_label_left, color=color.new(color.red, 20), textcolor=color.white, size=size.normal)
    
    if analyzedS1 != analyzedEntryLow
        line.new(bar_index - 50, analyzedS1, bar_index + 20, analyzedS1, 
             color=color.new(color.green, 50), width=1, style=line.style_dotted)
        label.new(bar_index + 22, analyzedS1, "S1", 
             style=label.style_label_left, color=color.new(color.green, 70), textcolor=color.white, size=size.tiny)
    
    if analyzedR1 != analyzedTakeProfit1
        line.new(bar_index - 50, analyzedR1, bar_index + 20, analyzedR1, 
             color=color.new(color.red, 50), width=1, style=line.style_dotted)
        label.new(bar_index + 22, analyzedR1, "R1", 
             style=label.style_label_left, color=color.new(color.red, 70), textcolor=color.white, size=size.tiny)

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// üíö ENTRY ZONE
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

if barstate.islast and showEntrySignals and gesamtScore >= 50
    box.new(bar_index - 30, analyzedEntryLow, bar_index + 15, analyzedEntryHigh, 
         border_color=color.new(color.lime, 40), 
         bgcolor=color.new(color.lime, 93), 
         border_width=2,
         text="üíö ENTRY ZONE\\n\\n" + 
              str.tostring(analyzedEntryLow, "#.##") + " - " + str.tostring(analyzedEntryHigh, "#.##") + "\\n\\n" +
              "Score: " + str.tostring(gesamtScore, "#") + "/100\\n" +
              "Setup: " + setupQuality,
         text_color=color.new(color.lime, 0), 
         text_size=size.small, 
         text_halign=text.align_center,
         text_valign=text.align_center)

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// üîî TRADING SIGNALE
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

if buySignal and showEntrySignals
    label.new(bar_index, low - atr * 0.5, 
         "üü¢ KAUFEN\\n" + str.tostring(close, "#.##") + " EUR\\n\\n" +
         "SL: " + str.tostring(analyzedStopLoss, "#.##") + "\\n" +
         "TP1: " + str.tostring(analyzedTakeProfit1, "#.##") + "\\n" +
         "R/R: 1:" + str.tostring(rrRatioTP1, "#.#"),
         style=label.style_label_up, 
         color=color.new(color.lime, 0), 
         textcolor=color.black, 
         size=size.large,
         tooltip="Multi-Agent Score: " + str.tostring(gesamtScore, "#") + "/100\\nSetup: " + setupQuality)

if sellSignalTP1 and showExitSignals
    label.new(bar_index, high + atr * 0.5, 
         "üéØ TAKE PROFIT 1\\n" + str.tostring(close, "#.##") + " EUR\\n\\n" +
         "Gewinn: +" + str.tostring(potentialGainTP1, "#.#") + "%",
         style=label.style_label_down, 
         color=color.new(color.lime, 0), 
         textcolor=color.black, 
         size=size.large)

if sellSignalTP2 and showExitSignals
    label.new(bar_index, high + atr * 0.5, 
         "üöÄ TAKE PROFIT 2!\\n" + str.tostring(close, "#.##") + " EUR\\n\\n" +
         "Gewinn: +" + str.tostring(potentialGainTP2, "#.#") + "%",
         style=label.style_label_down, 
         color=color.new(color.aqua, 0), 
         textcolor=color.black, 
         size=size.huge)

if sellSignalRSI and showExitSignals
    label.new(bar_index, high + atr * 0.3, 
         "‚ö†Ô∏è OVERBOUGHT\\nRSI: " + str.tostring(rsi, "#"),
         style=label.style_label_down, 
         color=color.new(color.orange, 20), 
         textcolor=color.white, 
         size=size.small,
         tooltip="Erw√§ge Teil-Verkauf")

if stopLossHit
    label.new(bar_index, low - atr * 0.5, 
         "‚õî STOP LOSS!\\n" + str.tostring(close, "#.##") + " EUR\\n\\n" +
         "SOFORT VERKAUFEN!",
         style=label.style_label_up, 
         color=color.new(color.red, 0), 
         textcolor=color.white, 
         size=size.huge)

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// üìä DASHBOARD
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

var table dashboard = table.new(position.top_left, 2, 6, 
     bgcolor=color.new(color.black, 5), 
     border_color=color.new(color.gray, 50), 
     border_width=2)

if barstate.islast
    scoreColor = gesamtScore >= 70 ? color.lime : gesamtScore >= 50 ? color.yellow : color.red
    table.cell(dashboard, 0, 0, "ü§ñ ${data.stock} SIGNAL", 
         bgcolor=color.new(scoreColor, 60), text_color=color.white, text_size=size.normal)
    table.merge_cells(dashboard, 0, 0, 1, 0)
    
    currentStatus = inEntryZone ? "üü¢ IN ENTRY ZONE" : (close > avgEntry ? "üìà √úBER ENTRY" : "üìâ UNTER ENTRY")
    statusColor = inEntryZone ? color.lime : (close > avgEntry ? color.blue : color.gray)
    
    table.cell(dashboard, 0, 1, "STATUS:", text_color=color.white, text_size=size.small)
    table.cell(dashboard, 1, 1, currentStatus, 
         bgcolor=color.new(statusColor, 70), text_color=color.white, text_size=size.small)
    
    table.cell(dashboard, 0, 2, "Entry:", text_color=color.white, text_size=size.small)
    table.cell(dashboard, 1, 2, str.tostring(avgEntry, "#.##") + " EUR", 
         text_color=color.yellow, text_size=size.small)
    
    table.cell(dashboard, 0, 3, "Stop Loss:", text_color=color.white, text_size=size.small)
    table.cell(dashboard, 1, 3, str.tostring(analyzedStopLoss, "#.##") + " EUR", 
         text_color=color.red, text_size=size.small)
    
    table.cell(dashboard, 0, 4, "TP1:", text_color=color.white, text_size=size.small)
    table.cell(dashboard, 1, 4, str.tostring(analyzedTakeProfit1, "#.##") + " EUR", 
         text_color=color.lime, text_size=size.small)
    
    table.cell(dashboard, 0, 5, "R/R Ratio:", text_color=color.white, text
